<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ’Š æ–°è—¥å»ºæª”æ¨¡æ“¬ç³»çµ±ï¼ˆç¿ ç¶ ç©©å®šç‰ˆï¼‰</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    body { 
        min-height: 100vh; 
        font-family: 'Noto Sans TC', sans-serif; 
    }
    #fallback { display:none; padding:16px; color:#334155; }
    .mono { font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; }
    
    /* å°ˆæ¥­è¡¨æ ¼æ¨™é ­æ¨£å¼ï¼šç¿ ç¶ è‰² (emerald-600) */
    .order-table th {
        background-color: #059669; /* emerald-600 */
        color: white; 
        font-weight: 500;
        padding: 0.5rem;
        text-align: left;
    }
    .order-table tbody tr:nth-child(odd) { background-color: #fff; }
    .order-table tbody tr:nth-child(even) { background-color: #f8fafc; }
    .order-table tbody tr:hover { background-color: rgba(5, 150, 105, 0.1); } /* emerald-600/10 */

    /* å¼·åŒ–è¼¸å…¥æ¡†çš„ç„¦é»æ•ˆæœï¼šç¿ ç¶ è‰² (emerald-600) */
    .focus-style:focus {
        border-color: #059669; /* emerald-600 */
        box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.2); 
    }
    .focus-style {
        border: 1px solid #d1d5db;
        padding: 0.5rem 0.75rem;
        border-radius: 0.5rem;
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <div id="root"></div>
  <div id="fallback" class="p-6">
    <h2 class="text-xl font-bold mb-4 text-red-600">æŠ±æ­‰ï¼æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•å¤±æ•— âŒ</h2>
    <p class="mb-2">é€™å¯èƒ½æ˜¯å› ç‚º React ç¨‹å¼åº«è¼‰å…¥å¤±æ•—æˆ–ç€è¦½å™¨å®‰å…¨æ€§é™åˆ¶æ‰€è‡´ã€‚</p>
    <p class="mb-4">å¦‚æœæ‚¨åœ¨ GitHub Pages ä¸Šé–‹å•Ÿï¼Œè«‹å˜—è©¦ä½¿ç”¨ <a href="https://app.netlify.com/drop" target="_blank" class="text-emerald-600 underline font-semibold">Netlify Drop</a> è¨—ç®¡ï¼Œå…¶ç©©å®šæ€§æ›´é«˜ã€‚</p>
  </div>

  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  
  <script type="text/javascript">
    const { useState, createElement: e } = React;

    // ================== å¸¸ç”¨æ¸…å–® & å°ç…§ ==================
    const unitList = ["tab","cap","amp","vial","syrg","btl","patch","pen","pack","supp","tube","dose","U","IU","mcg","mg","g","mL","gtt","q.s."];
    const unitLabel = { tab:"éŒ ", cap:"è† å›Š", amp:"å®‰ç“¿", vial:"å°ç“¶", syrg:"é‡ç­’", btl:"ç“¶", patch:"è²¼ç‰‡", pen:"æ³¨å°„ç­†", pack:"åŒ…", supp:"æ “åŠ‘", tube:"æ¢", dose:"åŠ‘é‡", U:"å–®ä½", IU:"åœ‹éš›å–®ä½", mcg:"å¾®å…‹", mg:"æ¯«å…‹", g:"å…¬å…‹", mL:"æ¯«å‡", gtt:"æ»´", "q.s.":"é©é‡" };
    const routeList = ["PO","IVD","IVP","SC","IM","INHL","TOPI","RECT"];
    const routeLabel = { PO:"å£æœ", IVD:"éœè„ˆæ»´æ³¨", IVP:"éœè„ˆæ³¨å°„", SC:"çš®ä¸‹æ³¨å°„", IM:"è‚Œè‚‰æ³¨å°„", INHL:"å¸å…¥", TOPI:"å¤–ç”¨", RECT:"è‚›é–€çµ¦è—¥" };
    const attributeList = ["è…åŠŸèƒ½ç®¡åˆ¶é‡","è‚åŠŸèƒ½ç®¡åˆ¶é‡","æŠ—å¾®ç”Ÿç‰©è—¥å“","è¡€æ¶²è£½åŠ‘è—¥å“","ä¸å»ºè­°ç®¡çŒ","éœ€æ´—è…å¾Œçµ¦è—¥","éœ€é™„ç­†é‡é‡é ­","éœ€é™„é‡å…·","é™CVCçµ¦è—¥","å†·è—è—¥å“","å†·å‡è—¥","è¡€å‹ç—…è¡€æ¶²è£½åŠ‘","é«˜é¢¨éšªæ›è§¸è—¥å“","æ¨™é¶è—¥å“(æ³¨å°„åŠ‘å‹)","æ¨™é¶è—¥å“(éæ³¨å°„åŠ‘å‹)","é«˜è­¦è¨Šè—¥å“","ç½•è¦‹ç–¾ç—…è—¥å“","ç–«è‹—","Chemoè—¥å“(5FåŒ–ç™‚å®¤èª¿åŠ‘)","æ³¡è£½æº¶æ¶²æ™‚éœ€ä½¿ç”¨Filter","æ»´æ³¨æ™‚éœ€ä½¿ç”¨Filter"];
    const reasonList = ["æŒçºŒé‡‹æ”¾åŠ‘å‹","èˆŒä¸‹åŠ‘å‹","è…¸æº¶åŠ‘å‹","å…§ç‚ºæ¶²ç‹€ç‰©","åŒ–å­¸æ²»ç™‚è—¥ï¼Œä¸å»ºè­°ç ”ç£¨","ç™¼æ³¡éŒ åŠ‘å‹","å£æº¶åŠ‘å‹","åˆºæ¿€é»è†œ","å°çœ¼ç›å…·åˆºæ¿€æ€§","å…·è¯åˆä½œç”¨æœƒå½±éŸ¿çºç‘¯è³ª","æ˜“æŸ“è‰²","å¯èƒ½æœƒé€ æˆæ¥è§¸æ€§çš®è†šç‚","å¢åŠ å¸æ”¶","æ˜“æ½®è§£","æ¸›ä½å¸æ”¶","ä»¿å–®å»ºè­°æ•´ç²’åæœ","è—¥å“ç‚ºç²‰åŠ‘","ç®¡åˆ¶è—¥å“"];
    const freqLabel = { QD:"æ¯æ—¥ä¸€æ¬¡", QDAC:"æ¯æ—¥ä¸€æ¬¡ï¼ˆé£¯å‰ï¼‰", QDPC:"æ¯æ—¥ä¸€æ¬¡ï¼ˆé£¯å¾Œï¼‰", BID:"æ¯æ—¥å…©æ¬¡", BIDAC:"æ¯æ—¥å…©æ¬¡ï¼ˆé£¯å‰ï¼‰", BIDPC:"æ¯æ—¥å…©æ¬¡ï¼ˆé£¯å¾Œï¼‰", TID:"æ¯æ—¥ä¸‰æ¬¡", TIDAC:"æ¯æ—¥ä¸‰æ¬¡ï¼ˆé£¯å‰ï¼‰", TIDPC:"æ¯æ—¥ä¸‰æ¬¡ï¼ˆé£¯å¾Œï¼‰", QID:"æ¯æ—¥å››æ¬¡", QIDAC:"æ¯æ—¥å››æ¬¡ï¼ˆé£¯å‰ï¼‰", QIDPC:"æ¯æ—¥å››æ¬¡ï¼ˆé£¯å¾Œï¼‰", Q12H:"æ¯12å°æ™‚ä¸€æ¬¡", Q8H:"æ¯8å°æ™‚ä¸€æ¬¡", Q6H:"æ¯6å°æ™‚ä¸€æ¬¡", QW:"æ¯é€±ä¸€æ¬¡", Q2W:"æ¯2é€±ä¸€æ¬¡", Q3W:"æ¯3é€±ä¸€æ¬¡", Q4W:"æ¯4é€±ä¸€æ¬¡", QM:"æ¯æœˆä¸€æ¬¡", Q2M:"æ¯2æœˆä¸€æ¬¡", Q3M:"æ¯3æœˆä¸€æ¬¡", Q6M:"æ¯6æœˆä¸€æ¬¡", PRN:"å¿…è¦æ™‚", STAT:"ç«‹å³çµ¦è—¥", "AS ORDER":"éµé†«å›‘" };
    const freqCalc = { QD:1, QDAC:1, QDPC:1, BID:2, BIDAC:2, BIDPC:2, TID:3, TIDAC:3, TIDPC:3, QID:4, QIDAC:4, QIDPC:4, Q12H:2, Q8H:3, Q6H:4, QW:1/7, Q2W:1/14, Q3W:1/21, Q4W:1/28, QM:1/30, Q2M:1/60, Q3M:1/90, Q6M:1/180, PRN:1, STAT:1, "AS ORDER":1 };

    // ========= æ›ç®—å·¥å…· =========
    function buildConversionMap(drug){
      const map = {};
      for(let i=0;i<4;i++){
        const v = parseFloat(drug[`convertValue${i}`]);
        const u = drug[`convertUnit${i}`];
        if(!isNaN(v) && u){ map[u] = v; }
      }
      return map; 
    }
    
    // è¨ˆç®—ç¸½é‡ï¼ˆç„¡æ¢ä»¶é€²ä½ï¼‰
    function calculateOrderQuantity(baseDose, freq, days, baseUnit, totalUnit, conversionMap){
      const timesPerDay = freqCalc[freq] || 1;
      const baseQty = (Number(baseDose) || 0) * timesPerDay * (Number(days) || 0); 
      const canConvert = Boolean(conversionMap[baseUnit] && conversionMap[totalUnit]);
      const convQtyRaw = canConvert ? baseQty * (conversionMap[totalUnit] / conversionMap[baseUnit]) : baseQty;
      const orderQty = Math.ceil(convQtyRaw);
      const orderUnit = canConvert ? totalUnit : baseUnit;
      return { orderQty, orderUnit };
    }

    // ========= å°å…ƒä»¶ (å·²ç·¨è­¯) =========
    const SectionTitle = ({children}) => (
      e("div", { className: "text-base font-semibold text-slate-700 mb-2 flex items-center gap-2 mt-4 border-b border-slate-200 pb-1" },
        e("div", { className: "h-3 w-1.5 rounded bg-emerald-600" }), // é¡è‰²ï¼šç¿ ç¶ 
        children
      )
    );
    const Field = ({label, children}) => (
      e("label", { className: "block" }, 
        e("div", { className: "text-sm font-medium text-slate-700 mb-1" }, label),
        children
      )
    );
    // Focus é¡è‰²ï¼šç¿ ç¶ 
    const TextInput = (p) => e("input", Object.assign({}, p, { className: "focus-style w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/60 " + (p.className || '') }));
    const NumberInput = (p) => e("input", Object.assign({}, p, { type: "number", min: "0", className: "focus-style w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/60 " + (p.className || '') }));
    // Focus é¡è‰²ï¼šç¿ ç¶ 
    const Select = ({value,onChange,children}) => (
      e("select", { value: value, onChange: onChange, className: "focus-style w-full rounded-lg border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-emerald-500/60 focus:border-emerald-500" }, children)
    );

    // ========= è—¥è¢‹é è¦½ (å·²ç·¨è­¯) =========
    function BagPreview({ drug, orderQty, orderUnit, days }){
      const routeZh = routeLabel[drug.route] || drug.route || 'â€”';
      const freqZh  = freqLabel[drug.freq] || drug.freq || 'â€”';
      const baseUnitZh  = unitLabel[drug.baseUnit] || drug.baseUnit;
      const displayUnitZh = unitLabel[orderUnit] || orderUnit || baseUnitZh;
      const doseTxt = drug.baseDose ? `æ¯æ¬¡ ${drug.baseDose} ${baseUnitZh||''}` : '';
      const usage   = [routeZh, freqZh, doseTxt].filter(Boolean).join(' ');
      return (
        e("section", { className: "bg-white p-5 rounded-2xl shadow-xl ring-2 ring-emerald-200" }, // é¡è‰²ï¼šç¿ ç¶ 
          e("div", { className: "border-b-2 border-emerald-600 pb-1 mb-2" }, e("div", { className: "text-lg font-bold text-emerald-700" }, "è—¥è¢‹é è¦½")), // é¡è‰²ï¼šç¿ ç¶ 
          e("div", { className: "font-bold text-base mb-1" }, ["å­¸åï¼š", drug.generic || 'â€”', " ", drug.specDesc || '']),
          e("div", { className: "font-bold text-base mb-1" }, ["å•†å“åï¼š", drug.brandEn || 'â€”', "ï¼ˆ", drug.brandZh || 'â€”', "ï¼‰"]),
          e("div", { className: "font-bold text-base mb-1" }, ["ç”¨æ³•ç”¨é‡ï¼š", usage || 'â€”']),
          e("div", { className: "font-bold text-base mb-1" }, ["è—¥å“ç¸½é‡ï¼šå…± ", orderQty, " ", displayUnitZh, " (å…± ", days, " å¤©)"]),
          e("div", { className: "font-bold text-base mb-1" }, ["æ²»ç™‚ç”¨é€”ï¼š", drug.bagTherUse || 'â€”']),
          e("div", { className: "font-bold text-base mb-1" }, ["å‰¯ä½œç”¨ï¼š", drug.bagADR || 'â€”']),
          e("div", { className: "font-bold text-base mb-1" }, ["å» ç‰Œç”¢åœ°ï¼š", drug.mfg || 'â€”', "ï¼ˆ", drug.origin || 'â€”', "ï¼‰"]),
          e("div", { className: "font-bold text-base mb-1" }, ["å„²å­˜æ–¹å¼ï¼š", drug.bagStorage || 'â€”'])
        )
      );
    }

    // ========= ä¸»é  (å·²ç·¨è­¯) =========
    function App(){
      const [drug, setDrug] = useState({
        generic:"", specDesc:"", atc:"", brandZh:"", brandEn:"", mfg:"", origin:"",
        baseDose:"", baseUnit:"", orderUnit:"", priceUnit:"", totalUnit:"", bagSubUnit:"",
        convertValue0:"", convertUnit0:"", convertValue1:"", convertUnit1:"", convertValue2:"", convertUnit2:"", convertValue3:"", convertUnit3:"",
        crush_forbid:false, unitdose_forbid:false, split_forbid:false, specialReason:"",
        route:"", freq:"", attributes:[], bagTherUse:"", bagADR:"", bagStorage:""
      });

      const [days, setDays] = useState(7); 
      
      const convMap = buildConversionMap(drug);
      const { orderQty, orderUnit } = calculateOrderQuantity(
        drug.baseDose, drug.freq, days, drug.baseUnit, drug.totalUnit, convMap
      );

      const updateDrug = (key, value) => setDrug(d => ({ ...d, [key]: value }));
      
      return (
        e("div", { className: "min-h-screen text-slate-800 bg-slate-50" },
          e("header", { className: "bg-emerald-600 px-4 py-4 flex justify-between items-center shadow-lg" }, // é¡è‰²ï¼šç¿ ç¶ 
            e("div", { className: "font-bold text-xl text-white" }, "ğŸ’Š æ–°è—¥å»ºæª”æ¨¡æ“¬ç³»çµ±")
          ),
          e("main", { className: "max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6 p-6" },
            // å·¦ï¼šè—¥å“åŸºæœ¬æª”
            e("section", { className: "bg-white p-5 rounded-2xl shadow-lg ring-1 ring-slate-200 overflow-y-auto" },
              e("div", { className: "text-xl font-bold mb-4 text-emerald-700" }, "è—¥å“åŸºæœ¬æª”"), // é¡è‰²ï¼šç¿ ç¶ 

              e(SectionTitle, null, "è—¥å"),
              e("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4" },
                e(Field, { label: "å­¸å" }, e(TextInput, { value: drug.generic, onChange: e => updateDrug('generic', e.target.value) })),
                e(Field, { label: "ä¸­æ–‡å•†å“å" }, e(TextInput, { value: drug.brandZh, onChange: e => updateDrug('brandZh', e.target.value) })),
                e(Field, { label: "è‹±æ–‡å•†å“å" }, e(TextInput, { value: drug.brandEn, onChange: e => updateDrug('brandEn', e.target.value) })),
                e(Field, { label: "ATC ä»£ç¢¼" }, e(TextInput, { value: drug.atc, onChange: e => updateDrug('atc', e.target.value) })),
                e(Field, { label: "è£½é€ å» åç¨±" }, e(TextInput, { value: drug.mfg, onChange: e => updateDrug('mfg', e.target.value) })),
                e(Field, { label: "ç”¢åœ°" }, e(TextInput, { value: drug.origin, onChange: e => updateDrug('origin', e.target.value) }))
              ),

              e(SectionTitle, null, "è¦æ ¼å«é‡"),
              e(Field, { label: "è¦æ ¼å«é‡æè¿°" }, e(TextInput, { value: drug.specDesc, onChange: e => updateDrug('specDesc', e.target.value) })),

              e(SectionTitle, null, "å–®ä½è¨­å®š"),
              e("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 mb-4" },
                e(Field, { label: "åŸºæœ¬åŠ‘é‡" }, e(NumberInput, { type: "text", value: drug.baseDose, onChange: e => updateDrug('baseDose', e.target.value) })),
                e(Field, { label: "åŸºæœ¬å–®ä½" }, e(Select, { value: drug.baseUnit, onChange: e => updateDrug('baseUnit', e.target.value) }, e("option", { value: "" }, "é¸æ“‡"), unitList.map(u => e("option", { key: u }, u))))
              ),
              e("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4" },
                e(Field, { label: "é†«å›‘å–®ä½" }, e(Select, { value: drug.orderUnit, onChange: e => updateDrug('orderUnit', e.target.value) }, e("option", { value: "" }, "é¸æ“‡"), unitList.map(u => e("option", { key: u }, u)))),
                e(Field, { label: "è¨ˆåƒ¹å–®ä½" }, e(Select, { value: drug.priceUnit, onChange: e => updateDrug('priceUnit', e.target.value) }, e("option", { value: "" }, "é¸æ“‡"), unitList.map(u => e("option", { key: u }, u)))),
                e(Field, { label: "çµ¦è—¥ç¸½é‡å–®ä½" }, e(Select, { value: drug.totalUnit, onChange: e => updateDrug('totalUnit', e.target.value) }, e("option", { value: "" }, "é¸æ“‡"), unitList.map(u => e("option", { key: u }, u)))),
                e(Field, { label: "è—¥è¢‹æ¬¡é‡å–®ä½" }, e(Select, { value: drug.bagSubUnit, onChange: e => updateDrug('bagSubUnit', e.target.value) }, e("option", { value: "" }, "é¸æ“‡"), unitList.map(u => e("option", { key: u }, u))))
              ),

              e(SectionTitle, null, "åŠ‘é‡è½‰æ›ä¿‚æ•¸"),
              e("div", { className: "grid grid-cols-4 gap-2 mb-4" },
                [0,1,2,3].map(i => (
                  e("div", { key: i, className: "flex gap-2 items-center" },
                    e(NumberInput, { type: "text", value: drug[`convertValue${i}`] || '', onChange: e => updateDrug(`convertValue${i}`, e.target.value) }),
                    e(Select, { value: drug[`convertUnit${i}`] || '', onChange: e => updateDrug(`convertUnit${i}`, e.target.value) }, e("option", { value: "" }, "é¸æ“‡å–®ä½"), unitList.map(u => e("option", { key: u }, u)))
                  )
                )),
                e("div", { className: "text-xs text-slate-500 col-span-4" }, "ä¾‹ï¼š1 btl = 10 mL = 200 gttï¼ˆè«‹ä¾å·¦åˆ°å³å¡«å…¥ 2â€“4 çµ„ï¼‰")
              ),

              e(SectionTitle, null, "å£æœè—¥å“ç‰¹æ®ŠåŠ‘å‹é™åˆ¶"),
              e("div", { className: "flex flex-col md:flex-row gap-4 text-sm items-start" },
                e("div", { className: "flex flex-col gap-2 w-40" },
                  e("label", { className: "flex items-center gap-2" }, e("input", { type: "checkbox", checked: drug.crush_forbid, onChange: e => updateDrug('crush_forbid', e.target.checked) }), "ä¸å¯ç£¨ç²‰"),
                  e("label", { className: "flex items-center gap-2" }, e("input", { type: "checkbox", checked: drug.unitdose_forbid, onChange: e => updateDrug('unitdose_forbid', e.target.checked) }), "ä¸å¯åˆ†åŒ…"),
                  e("label", { className: "flex items-center gap-2" }, e("input", { type: "checkbox", checked: drug.split_forbid, onChange: e => updateDrug('split_forbid', e.target.checked) }), "ä¸å¯å‰")
                ),
                e("div", { className: "flex-1" },
                  e(Field, { label: "åŸå› " }, e(Select, { value: drug.specialReason||'', onChange: e => updateDrug('specialReason', e.target.value) }, e("option", { value: "" }, "é¸æ“‡åŸå› "), reasonList.map(r => e("option", { key: r }, r))))
                )
              ),

              e(SectionTitle, null, "ç”¨æ³•ã€é »æ¬¡èˆ‡å¤©æ•¸"),
              e("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4" },
                e(Field, { label: "çµ¦è—¥é€”å¾‘" }, e(Select, { value: drug.route, onChange: e => updateDrug('route', e.target.value) }, e("option", { value: "" }, "é¸æ“‡"), routeList.map(r => e("option", { key: r }, r)))),
                e(Field, { label: "çµ¦è—¥é »æ¬¡" }, e(Select, { value: drug.freq, onChange: e => updateDrug('freq', e.target.value) }, e("option", { value: "" }, "é¸æ“‡"), Object.keys(freqCalc).map(f => e("option", { key: f }, f)))),
                e(Field, { label: "å¤©æ•¸" }, e(NumberInput, { value: days, onChange: e => setDays(Number(e.target.value)), placeholder: "è«‹è¼¸å…¥å¤©æ•¸" }))
              ),

              e(SectionTitle, null, "å±¬æ€§"),
              e("div", { className: "grid grid-cols-2 md:grid-cols-3 gap-2 text-sm" },
                attributeList.map(attr => (
                  e("label", { key: attr, className: "flex items-center gap-2" },
                    e("input", { type: "checkbox", checked: drug.attributes?.includes(attr), onChange: () => {
                      const set = new Set(drug.attributes||[]);
                      set.has(attr) ? set.delete(attr) : set.add(attr);
                      updateDrug('attributes', [...set]);
                    }}),
                    attr
                  )
                ))
              ),

              e(SectionTitle, null, "è—¥è¢‹è³‡æ–™"),
              e("div", { className: "grid gap-4" },
                e(Field, { label: "æ²»ç™‚ç”¨é€”" }, e(TextInput, { value: drug.bagTherUse, onChange: e => updateDrug('bagTherUse', e.target.value) })),
                e(Field, { label: "å‰¯ä½œç”¨å…§å®¹" }, e(TextInput, { value: drug.bagADR, onChange: e => updateDrug('bagADR', e.target.value) })),
                e(Field, { label: "å„²å­˜æ–¹å¼" }, e(TextInput, { value: drug.bagStorage, onChange: e => updateDrug('bagStorage', e.target.value) }))
              )
            ),

            // å³æ¬„ï¼šä¸Šâ†’é†«å›‘é–‹ç«‹ç•«é¢ï¼›ä¸‹â†’è—¥è¢‹é è¦½
            e("div", { className: "flex flex-col gap-6" },
              // é†«å›‘é–‹ç«‹ç•«é¢
              e("section", { className: "bg-white p-5 rounded-2xl shadow-lg ring-1 ring-emerald-300" }, // Ring é¡è‰²ï¼šç¿ ç¶ 
                e("div", { className: "text-lg font-bold mb-2 text-slate-700" }, "é†«å›‘é–‹ç«‹ç•«é¢"),
                e("div", { className: "border border-slate-200 rounded-xl overflow-hidden" },
                  e("table", { className: "w-full text-sm" },
                    e("thead", { className: "order-table sticky top-0 z-10" },
                      e("tr", null,
                        e("th", { className: "p-2 text-left" }, "è—¥å"),
                        e("th", { className: "p-2 text-left" }, "åŠ‘é‡"),
                        e("th", { className: "p-2 text-left" }, "é€”å¾‘"),
                        e("th", { className: "p-2 text-left" }, "é »æ¬¡"),
                        e("th", { className: "p-2 text-left" }, "å¤©æ•¸"),
                        e("th", { className: "p-2 text-left" }, "ç¸½é‡"),
                        e("th", { className: "p-2 text-left" }, "æé†’")
                      )
                    ),
                    e("tbody", { className: "divide-y divide-slate-100" },
                      e("tr", { className: "odd:bg-white even:bg-slate-50 hover:bg-emerald-50/40 transition-colors" }, // Hover é¡è‰²ï¼šç¿ ç¶ 
                        e("td", { className: "p-2" }, [drug.generic, drug.specDesc].filter(Boolean).join(' ') || 'â€”'),
                        e("td", { className: "p-2" }, [drug.baseDose || 'â€”', unitLabel[drug.baseUnit] || drug.baseUnit || ''].join(' ')),
                        e("td", { className: "p-2" }, drug.route || 'â€”'),
                        e("td", { className: "p-2" }, drug.freq || 'â€”'),
                        e("td", { className: "p-2 font-bold text-lg" }, [days, " å¤©"].join('')), 
                        e("td", { className: "p-2 font-bold text-lg text-emerald-700" }, [orderQty, unitLabel[orderUnit] || orderUnit || ''].join(' ')), // ç¸½é‡é¡è‰²ï¼šç¿ ç¶ 
                        e("td", { className: "p-2 text-xs text-red-600 font-medium" },
                          (drug.crush_forbid || drug.unitdose_forbid || drug.split_forbid || drug.specialReason)
                            ? [
                                drug.crush_forbid ? 'ä¸å¯ç£¨ç²‰' : '',
                                drug.unitdose_forbid ? 'ä¸å¯åˆ†åŒ…' : '',
                                drug.split_forbid ? 'ä¸å¯å‰' : '',
                                drug.specialReason ? `${drug.specialReason}` : ''
                              ].filter(Boolean).join(' ')
                            : 'â€”'
                        )
                      )
                    )
                  )
                )
              ),

              // è—¥è¢‹é è¦½
              e(BagPreview, { drug: drug, orderQty: orderQty, orderUnit: orderUnit, days: days })
            )
          )
        )
      );
    }

    // æ›è¼‰ React æ‡‰ç”¨
    try {
      ReactDOM.createRoot(document.getElementById('root')).render(e(App));
    } catch (e) {
      document.getElementById('fallback').style.display = 'block';
      console.error(e);
    }
  </script>
</body>
</html>